# ğŸ‡»ğŸ‡³ Há»‡ Thá»‘ng PhÃ¢n TÃ­ch Thá»‹ TrÆ°á»ng Chá»©ng KhoÃ¡n Viá»‡t Nam

![Version](https://img.shields.io/badge/version-1.0.0-blue.svg)
![License](https://img.shields.io/badge/license-MIT-green.svg)
![Python](https://img.shields.io/badge/python-3.9+-blue.svg)

Há»‡ thá»‘ng phÃ¢n tÃ­ch chá»©ng khoÃ¡n tá»± Ä‘á»™ng sá»­ dá»¥ng AI Agents, n8n workflows, vÃ  real-time data processing Ä‘á»ƒ cung cáº¥p insights toÃ n diá»‡n vá» thá»‹ trÆ°á»ng chá»©ng khoÃ¡n Viá»‡t Nam.

## ğŸŒŸ TÃ­nh NÄƒng ChÃ­nh

### ğŸ“Š PhÃ¢n TÃ­ch Äa Chiá»u
- **Technical Analysis**: RSI, MACD, Bollinger Bands, SMA/EMA, Stochastic, ADX
- **Sentiment Analysis**: PhÃ¢n tÃ­ch tÃ¢m lÃ½ tá»« tin tá»©c vÃ  máº¡ng xÃ£ há»™i
- **Trend Forecasting**: Dá»± bÃ¡o xu hÆ°á»›ng dá»±a trÃªn ML models
- **Risk Assessment**: ÄÃ¡nh giÃ¡ rá»§i ro Ä‘áº§u tÆ°

### ğŸ¤– AI Agent System
- **Technical Agent**: PhÃ¢n tÃ­ch ká»¹ thuáº­t chuyÃªn sÃ¢u
- **Sentiment Agent**: Xá»­ lÃ½ ngÃ´n ngá»¯ tá»± nhiÃªn tiáº¿ng Viá»‡t (PhoBERT)
- **Forecast Agent**: Tá»•ng há»£p vÃ  dá»± bÃ¡o
- **Master Agent**: Äiá»u phá»‘i vÃ  tá»•ng há»£p káº¿t quáº£

### ğŸ“° Thu Tháº­p Dá»¯ Liá»‡u Tá»± Äá»™ng
- RSS feeds tá»« VnEconomy, CafeF, VietStock, Äáº§u tÆ°
- Market data real-time tá»« HSX/HNX
- Social sentiment tá»« Facebook Groups, Telegram channels
- Anti-spam filtering vÃ  rumor detection

### ğŸ”” ThÃ´ng BÃ¡o Real-time
- Telegram bot vá»›i daily reports
- Email alerts cho cÃ¡c sá»± kiá»‡n quan trá»ng
- Web dashboard vá»›i live updates
- Custom alerts theo tiÃªu chÃ­ ngÆ°á»i dÃ¹ng

## ğŸ—ï¸ Kiáº¿n TrÃºc Há»‡ Thá»‘ng

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Data Sources                               â”‚
â”‚  RSS Feeds | Market APIs | Social Media | Internal Data     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                n8n Workflow Orchestration                    â”‚
â”‚  Scraping | Scheduling | Data Pipeline | Error Handling     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   AWS S3 Storage                             â”‚
â”‚    Raw Data | Processed Data | Reports | Backups            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  AI Agent Processing                         â”‚
â”‚  Technical | Sentiment | Forecast | Master Orchestrator     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            Output & Distribution                             â”‚
â”‚  Web Dashboard | Telegram | Email | API | Mobile App        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ Quick Start

### Prerequisites

- Docker & Docker Compose
- AWS Account (cho S3 storage)
- Telegram Bot Token
- Python 3.9+
- Node.js 18+ (cho web dashboard)

### Installation

1. **Clone Repository**
```bash
git clone https://github.com/your-username/vnstock-analysis.git
cd vnstock-analysis
```

2. **Setup Environment Variables**
```bash
cp .env.example .env
# Edit .env file vá»›i cÃ¡c thÃ´ng tin cáº§n thiáº¿t
nano .env
```

3. **Download AI Models** (Optional - náº¿u dÃ¹ng PhoBERT local)
```bash
mkdir -p models/phobert
# Download PhoBERT model tá»« HuggingFace
python scripts/download_models.py
```

4. **Start Services**
```bash
# Development
docker-compose up -d

# Production (with monitoring)
docker-compose --profile production --profile monitoring up -d
```

5. **Access Services**
- n8n Workflow UI: http://localhost:5678
- Web Dashboard: http://localhost:3000
- Agent API: http://localhost:8000
- Grafana Monitoring: http://localhost:3001

### Initial Configuration

1. **Import n8n Workflow**
```bash
# Copy workflow file vÃ o n8n
docker cp n8n-workflow-daily-analysis.json vnstock-n8n:/home/node/.n8n/workflows/
```

2. **Setup Telegram Bot**
```bash
# Trong Telegram, chat vá»›i @BotFather
/newbot
# Follow instructions vÃ  láº¥y token
# Add token vÃ o .env file
```

3. **Configure AWS S3**
```bash
# Create S3 bucket
aws s3 mb s3://vnstock-data --region ap-southeast-1

# Setup bucket structure
python scripts/init_s3_structure.py
```

## ğŸ“– Sá»­ Dá»¥ng

### 1. PhÃ¢n TÃ­ch Má»™t MÃ£ Cá»• Phiáº¿u

**Via Python:**
```python
from technical_agent import TechnicalAnalysisAgent

# PhÃ¢n tÃ­ch VNM (Vinamilk)
agent = TechnicalAnalysisAgent(symbol='VNM', days=90)
analysis = agent.get_full_analysis()

print(f"Khuyáº¿n nghá»‹: {analysis['signals']['recommendation']}")
print(f"Äá»™ tin cáº­y: {analysis['signals']['confidence']:.1%}")
```

**Via API:**
```bash
curl -X POST http://localhost:8000/api/analyze/technical \
  -H "Content-Type: application/json" \
  -d '{"symbol": "VNM", "days": 90}'
```

**Via Telegram Bot:**
```
/analyze VNM
```

### 2. Láº¥y BÃ¡o CÃ¡o HÃ ng NgÃ y

```bash
# Auto-generated daily report Ä‘Æ°á»£c gá»­i vÃ o 8:00 AM
# Hoáº·c trigger manually:
curl http://localhost:8000/api/reports/daily
```

### 3. Subscribe Alerts

```bash
# Trong Telegram bot
/subscribe VNM HPG FPT
/alert_settings high_risk=true rumor_detection=true
```

## ğŸ”§ Configuration

### n8n Workflow Customization

Edit `n8n-workflow-daily-analysis.json` Ä‘á»ƒ:
- Thay Ä‘á»•i thá»i gian cháº¡y (máº·c Ä‘á»‹nh 8:00 AM)
- ThÃªm/bá»›t nguá»“n RSS feeds
- Customize filtering logic
- Add more agents

### Agent Configuration

Edit `agent-service/config.py`:
```python
# Technical indicators
TECHNICAL_CONFIG = {
    'rsi_period': 14,
    'macd_fast': 12,
    'macd_slow': 26,
    'bollinger_period': 20,
    'sma_periods': [20, 50, 200]
}

# Sentiment analysis
SENTIMENT_CONFIG = {
    'model': 'vinai/phobert-base',
    'confidence_threshold': 0.7,
    'batch_size': 32
}
```

## ğŸ“Š Data Flow

### Daily Workflow (8:00 AM)

1. **Scraping Phase** (8:00 - 8:15)
   - Fetch RSS feeds from 5+ sources
   - Parse and filter spam
   - Save raw data to S3

2. **Hot Stock Detection** (8:15 - 8:20)
   - Analyze mentions across all sources
   - Identify top 10 most discussed stocks
   - Fetch market data for hot stocks

3. **Analysis Phase** (8:20 - 8:35)
   - Technical Agent: Calculate 15+ indicators
   - Sentiment Agent: Analyze 100+ news articles
   - Forecast Agent: Generate predictions

4. **Report Generation** (8:35 - 8:40)
   - Master Agent synthesizes results
   - Generate Markdown/HTML/JSON reports
   - Save to S3 and database

5. **Distribution** (8:40 - 8:45)
   - Send Telegram notifications
   - Update web dashboard
   - Send email alerts (if enabled)
   - Trigger webhook for mobile app

## ğŸ›¡ï¸ Security & Compliance

### Legal Disclaimer

âš ï¸ **QUAN TRá»ŒNG**: Há»‡ thá»‘ng nÃ y chá»‰ cung cáº¥p thÃ´ng tin tham kháº£o, khÃ´ng pháº£i lá»i khuyÃªn Ä‘áº§u tÆ°. NgÆ°á»i dÃ¹ng pháº£i tá»± chá»‹u trÃ¡ch nhiá»‡m cho cÃ¡c quyáº¿t Ä‘á»‹nh Ä‘áº§u tÆ° cá»§a mÃ¬nh.

### Data Privacy

- User data Ä‘Æ°á»£c mÃ£ hÃ³a
- KhÃ´ng lÆ°u trá»¯ thÃ´ng tin nháº¡y cáº£m
- TuÃ¢n thá»§ GDPR vÃ  PDPA (Viá»‡t Nam)

### API Rate Limiting

```python
# Máº·c Ä‘á»‹nh: 1000 requests/hour
RATE_LIMITS = {
    'anonymous': 100,    # requests/hour
    'registered': 1000,  # requests/hour
    'premium': 10000     # requests/hour
}
```

## ğŸ§ª Testing

```bash
# Run unit tests
pytest tests/

# Run integration tests
pytest tests/integration/

# Test individual agent
python tests/test_technical_agent.py

# Test n8n workflow
npm run test:workflow
```

## ğŸ“ˆ Performance

### Benchmarks (on 4 CPU cores, 8GB RAM)

- **Scraping**: 100 articles in ~30 seconds
- **Technical Analysis**: 1 stock in ~2 seconds
- **Sentiment Analysis**: 100 articles in ~45 seconds
- **Full Daily Report**: 10 stocks in ~5 minutes

### Optimization Tips

1. **Caching**: Enable Redis caching
2. **Parallel Processing**: Increase Celery workers
3. **Database Indexing**: Add indexes on frequently queried columns
4. **CDN**: Use CloudFront for static assets

## ğŸ” Monitoring & Logging

### Prometheus Metrics

```yaml
# Available at http://localhost:9090
- scraping_success_rate
- analysis_duration_seconds
- api_requests_total
- error_rate
- queue_length
```

### Grafana Dashboards

Pre-configured dashboards:
1. System Overview
2. Analysis Performance
3. Data Pipeline Health
4. User Activity

### Logs

```bash
# View logs
docker-compose logs -f agent-service
docker-compose logs -f n8n

# Structured logging format
{
  "timestamp": "2026-01-28T08:00:00Z",
  "level": "INFO",
  "service": "technical-agent",
  "symbol": "VNM",
  "message": "Analysis completed",
  "duration_ms": 1234
}
```

## ğŸ› Troubleshooting

### Common Issues

**1. n8n workflow khÃ´ng cháº¡y**
```bash
# Check n8n logs
docker logs vnstock-n8n

# Restart n8n
docker-compose restart n8n
```

**2. Agent service crashed**
```bash
# Check logs
docker logs vnstock-agents

# Common causes:
# - Out of memory (increase Docker memory)
# - Missing API keys (check .env)
# - Network timeout (increase API_TIMEOUT_SECONDS)
```

**3. S3 upload failed**
```bash
# Verify AWS credentials
aws s3 ls s3://vnstock-data

# Check IAM permissions
# Ensure policy includes: s3:PutObject, s3:GetObject, s3:ListBucket
```

**4. Telegram bot khÃ´ng response**
```bash
# Verify bot token
curl https://api.telegram.org/bot<YOUR_TOKEN>/getMe

# Check network connectivity
docker exec vnstock-telegram ping api.telegram.org
```

## ğŸš§ Roadmap

### Phase 1: MVP (ThÃ¡ng 1-2) âœ…
- [x] Core infrastructure setup
- [x] Technical analysis agent
- [x] Sentiment analysis agent
- [x] Basic n8n workflow
- [x] Telegram bot

### Phase 2: Enhancement (ThÃ¡ng 3-4)
- [ ] Social media scraping (Facebook, Telegram)
- [ ] Advanced ML models (LSTM, Transformer)
- [ ] Rumor detection system
- [ ] Web dashboard vá»›i real-time updates
- [ ] Email notification system

### Phase 3: Scale (ThÃ¡ng 5-6)
- [ ] Portfolio tracking & optimization
- [ ] Mobile app (React Native)
- [ ] Custom alerts engine
- [ ] Backtesting framework
- [ ] Multi-user support

### Phase 4: Monetization (ThÃ¡ng 7+)
- [ ] Premium subscription tiers
- [ ] API marketplace
- [ ] White-label solution
- [ ] Institutional-grade analytics
- [ ] Partner integrations

## ğŸ¤ Contributing

Contributions are welcome! Please read [CONTRIBUTING.md](CONTRIBUTING.md) for details.

### Development Workflow

1. Fork the repository
2. Create feature branch (`git checkout -b feature/AmazingFeature`)
3. Commit changes (`git commit -m 'Add AmazingFeature'`)
4. Push to branch (`git push origin feature/AmazingFeature`)
5. Open Pull Request

### Code Style

- Python: Follow PEP 8
- JavaScript: Use ESLint with Airbnb config
- Commit messages: Use Conventional Commits

## ğŸ“œ License

This project is licensed under the MIT License - see [LICENSE](LICENSE) file.

## ğŸ™ Acknowledgments

- **vnstock** library cho market data
- **Anthropic Claude** cho AI capabilities
- **n8n** cho workflow automation
- **PhoBERT** cho Vietnamese NLP
- Vietnamese stock community

## ğŸ“ Contact & Support

- **Email**: support@vnstock-analysis.com
- **Telegram**: [@vnstock_support](https://t.me/vnstock_support)
- **GitHub Issues**: [Create Issue](https://github.com/your-username/vnstock-analysis/issues)
- **Documentation**: [Wiki](https://github.com/your-username/vnstock-analysis/wiki)

## âš–ï¸ Disclaimer

Há»‡ thá»‘ng nÃ y Ä‘Æ°á»£c phÃ¡t triá»ƒn cho má»¥c Ä‘Ã­ch giÃ¡o dá»¥c vÃ  nghiÃªn cá»©u. TÃ¡c giáº£ khÃ´ng chá»‹u trÃ¡ch nhiá»‡m cho báº¥t ká»³ tá»•n tháº¥t tÃ i chÃ­nh nÃ o phÃ¡t sinh tá»« viá»‡c sá»­ dá»¥ng há»‡ thá»‘ng. NgÆ°á»i dÃ¹ng pháº£i tá»± nghiÃªn cá»©u ká»¹ lÆ°á»¡ng vÃ  chá»‹u trÃ¡ch nhiá»‡m cho cÃ¡c quyáº¿t Ä‘á»‹nh Ä‘áº§u tÆ° cá»§a mÃ¬nh.

---

**Made with â¤ï¸ in Vietnam ğŸ‡»ğŸ‡³**

**â­ Star this repo if you find it useful!**
